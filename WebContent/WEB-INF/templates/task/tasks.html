<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>MFLoan | Docflow</title>

    <div th:replace="fragments/header :: header-css"></div>

    <link th:href="@{/assets/global/plugins/datatables/keyTable.bootstrap.css}" rel="stylesheet" type="text/css" />
    <link th:href="@{/assets/global/plugins/datatables/datatables.min.css}" rel="stylesheet" type="text/css" />
    <link th:href="@{/assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.css}" rel="stylesheet" type="text/css" />

</head>
<body class="page-header-fixed page-sidebar-closed-hide-logo page-container-bg-solid page-sidebar-closed">
<div th:replace="layout :: header-top"></div>
<div class="page-container">
    <div th:replace="layout :: page-container-sidebar" />
    <div class="page-content-wrapper">
        <div class="page-content">
            <div class="row">
                <div class="col-md-12">
                    <div class="portlet light portlet-fit">
                        <div class="portlet-title">
                            <div class="caption">
                                <i class="icon-settings font-green"></i>
                                <span class="caption-subject font-green bold uppercase"> Открытые задачи </span>
                            </div>
                        </div>
                        <div class="portlet-body">
                            <div class="row">
                                <div class="col-md-12">
                                    <table class="table table-light" id="openTasksTable">
                                        <thead>
                                        <tr>
                                            <th>№</th>
                                            <th>Описание</th>
                                            <th>Состояние</th>
                                            <th>Приоритет</th>
                                            <th>Владелец</th>
                                            <th>Дата создания</th>
                                            <th>Срок</th>
                                            <th>Дата выполнения</th>
                                            <th></th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr th:each="task : ${openTasks}">
                                            <td th:text="${task.id}"></td>
                                            <td th:text="${task.summary}"></td>
                                            <td th:text="${task.status}"></td>
                                            <td th:text="${task.priority}"></td>
                                            <td th:text="${task.createdBy.username}"></td>
                                            <td th:text="${task.createdOn}"></td>
                                            <td th:text="${task.targetResolutionDate}"></td>
                                            <td th:text="${task.actualResolutionDate}">None</td>
                                            <td><a th:href="@{__${task.objectType}__}" role='button' class='btn btn-xs green-stripe'> Открыть </a></td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="portlet light portlet-fit">
                        <div class="portlet-title">
                            <div class="caption">
                                <i class="icon-settings font-green"></i>
                                <span class="caption-subject font-green bold uppercase"> Завершенные задачи </span>
                            </div>
                        </div>
                        <div class="portlet-body">
                            <div class="row">
                                <div class="col-md-12">
                                    <table class="table table-light" id="closedTasksTable">
                                        <thead>
                                        <tr>
                                            <th>№</th>
                                            <th>Описание</th>
                                            <th>Состояние</th>
                                            <th>Приоритет</th>
                                            <th>Владелец</th>
                                            <th>Дата создания</th>
                                            <th>Срок</th>
                                            <th>Дата выполнения</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr th:each="task : ${closedTasks}">
                                            <td th:text="${task.id}"></td>
                                            <td th:text="${task.summary}"></td>
                                            <td th:text="${task.status}"></td>
                                            <td th:text="${task.priority}"></td>
                                            <td th:text="${task.createdBy.username}"></td>
                                            <td th:text="${task.createdOn}"></td>
                                            <td th:text="${task.targetResolutionDate}"></td>
                                            <td th:text="${task.actualResolutionDate}">None</td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div th:replace="layout :: footer"/>
<div th:replace="fragments/footer :: footer-js"/>

<script th:src="@{/assets/global/plugins/datatables/datatables.js}" type="text/javascript"></script>
<script th:src="@{/assets/global/plugins/datatables/dataTables.keyTable.js}" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function() {
        $('#openTasksTable').DataTable({
            "language": {"url": "//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Russian.json"},
            "info":     false
        } );

        $('#closedTasksTable').DataTable({
            "language": {"url": "//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Russian.json"},
            "info":     false
        } );
    });
</script>

</body>
</html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">

<body>
    <th:block th:fragment="hiddenFields">
        <div hidden="hidden">
            <input type="hidden" th:field="*{id}"/>
            <input type="hidden" th:field="*{version}"/>
            <input type="hidden" th:field="*{uuid}"/>
            <input type="hidden" th:field="*{record_status}"/>
            <input type="hidden" th:field="*{owner}"/>
            <input type="hidden" th:field="*{documentState}"/>
            <input type="hidden" th:field="*{docIndex}"/>
            <input type="hidden" th:field="*{documentType}"/>
            <input type="hidden" th:field="*{documentSubType}"/>
        </div>
    </th:block>
    <th:block th:fragment="script">
        <script type="text/javascript" th:inline="javascript">

            $(document).ready(function() {

                CKEDITOR.config.readOnly = [[${document.documentState.ordinal()}]] > 4;
                CKEDITOR.replace("description", {
                    language: 'ru',
                    uiColor: '#ffffff',
                    toolbar: [
                        { name: 'clipboard', groups: [ 'clipboard' ], items: [ 'Cut', 'Copy', 'Paste', 'PasteFromWord' ] },
                        { name: 'basicstyles', groups: [ 'basicstyles', 'cleanup' ], items: [ 'Bold', 'Italic', 'Underline', 'Strike' ] },
                        { name: 'paragraph', groups: [ 'list', 'indent', 'blocks', 'align', 'bidi' ], items: [ 'NumberedList', 'BulletedList', '-', 'JustifyLeft', 'JustifyCenter', 'JustifyRight', 'JustifyBlock' ] },
                        { name: 'insert', items: [ 'Image', 'Table' ] },
                        { name: 'styles', items: [ 'Font', 'FontSize' ] },
                        { name: 'tools', items: [ 'Maximize' ] }
                    ],
                    toolbarGroups: [
                        { name: 'clipboard', groups: [ 'clipboard', 'undo' ] },
                        { name: 'forms' },
                        '/',
                        { name: 'basicstyles', groups: [ 'basicstyles', 'cleanup' ] },
                        { name: 'paragraph', groups: [ 'list', 'indent', 'blocks', 'align' ] },
                        { name: 'insert' },
                        '/',
                        { name: 'styles' },
                        { name: 'tools' }
                    ]
                });

                $('#tabstages a').on('click', function (e) {
                    e.currentTarget.id == "nav-main-tab" ? $(".act").show() : $(".act").hide()
                })
            });

        </script>
    </th:block>
    <th:block th:fragment="history">
        <div class="form-group m-form__group">
            <table class="table table-bordered table-striped">
                <thead class="bg-info">
                <tr>
                    <th class="align-middle m-2 text-white" width="auto">Дата</th>
                    <th class="align-middle m-2 text-white">От</th>
                    <th class="align-middle m-2 text-white">Задачи</th>
                    <th class="align-middle m-2 text-white">Срок</th>
                    <th class="align-middle m-2 text-white">Кому</th>
                    <th class="align-middle m-2 text-white">Результат</th>
                    <th class="align-middle m-2 text-white" width="auto">Завершен</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="task : ${tasks}">
                    <td><label class="align-middle m-2" th:text= "${#dates.format(task.createdOn, 'dd.MM.yyyy')}"></label></td>
                    <td><label class="align-middle m-2" th:utext="${task.createdBy != null } ? ${task.createdBy.staff.name} : 'Система'"></label></td>
                    <td><label class="align-middle m-2" th:utext="${task.description}"></label></td>
                    <td><label class="align-middle m-2" th:utext="${#dates.format(task.targetResolutionDate, 'dd.MM.yyyy')}"></label></td>
                    <td><label class="align-middle m-2" th:utext="${task.assignedTo.staff.name}"></label></td>
                    <td><label class="align-middle m-2" th:utext="${task.resolutionSummary}"></label></td>
                    <td><label class="align-middle m-2" th:text= "${#dates.format(task.actualResolutionDate, 'dd.MM.yyyy')}"></label></td>
                </tr>
                </tbody>
            </table>

        </div>
    </th:block>
    <th:block th:fragment="journal">
        <div class="form-group m-form__group">
            <table class="table table-bordered table-striped">
                <thead class="bg-info">
                <tr>
                    <th class="align-middle m-2 text-white">Дата</th>
                    <th class="align-middle m-2 text-white">Пользователь</th>
                    <th class="align-middle m-2 text-white">Действие</th>
                    <th class="align-middle m-2 text-white">Примечание</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="dd : *{dispatchData}">
                    <td><label class="align-middle m-2" th:text="${#dates.format(dd.dispatchInitTime, 'dd-MM-yyyy HH:mm')}"></label></td>
                    <td><label class="align-middle m-2" th:text="${dd.dispatchBy.staff.name}"></label></td>
                    <td><label class="align-middle m-2" th:text="${dd.dispatchType.text()}"></label></td>
                    <td><label class="align-middle m-2" th:utext="${dd.description}"></label></td>
                </tr>
                </tbody>
            </table>
        </div>
    </th:block>
    <th:block th:fragment="documentActions">
        <button style="margin: 3px"
                class="act btn btn-success"
                name="action"
                th:each="action : ${actions}"
                th:value="${action.name()}"
                th:text="${action.text()}"
                th:type="${action.toString() == 'TORECONCILE' or action.toString() == 'SEND'} ? 'button' : 'submit'"
                th:attr="data-toggle=${action.toString() == 'TORECONCILE' or action.toString() == 'SEND'} ? 'modal' : '', data-target=${action.toString() == 'TORECONCILE' or action.toString() == 'SEND'} ? '#pick' : ''">
        </button>
    </th:block>
    <th:block th:fragment="internalIndex">
        <table class="table table-bordered table-hover" id="documentTable">
            <thead class="thead-default">
            <tr>
                <th width="30px"></th>
                <th width="30px">№</th>
                <th width="50px"></th>
                <th th:utext="|#{label.document.documentSubType} <br> #{label.document.title}|">Относительно</th>
                <th width="120px">Исх. № и Дата</th>
                <th th:text="#{label.document.sender}">Отправитель</th>
                <th width="120px">Вхд. № и Дата</th>
                <th th:text="#{label.document.receiver}">Исполнитель</th>
                <th th:text="#{label.document.duedate}" width="100px">Срок</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="document, i : ${documents}" th:classappend="${tasks.?[objectId == __${document.id}__].isEmpty() ? '' : ' m--bg-warning'}">
                <td class="table-actions text-left">
                    <span>
                        <div class="dropdown">
                            <a href="#" class="btn m-btn m-btn--hover-metal m-btn--icon m-btn--icon-only m-btn--pill btn-dropdown" data-toggle="dropdown"><i class="la la-ellipsis-h"></i></a>
                            <div class="dropdown-menu dropdown-menu-left">

                                <a class="dropdown-item" th:if="${tasks.?[objectId == __${document.id}__].isEmpty()}" th:href="@{/doc/view/__${document.id}__}">
                                    <span th:text="#{label.view}"></span>
                                </a>

                                <a class="dropdown-item" th:if="${!tasks.?[objectId == __${document.id}__].isEmpty()}" th:href="@{/doc/edit/__${document.id}__}">
                                    <span th:text="#{label.open}"></span>
                                </a>

                            </div>
                        </div>
                    </span>
                </td>
                <td th:text="${i.index+1}"></td>
                <td class="text-danger text-center"><span th:if="${document.documentDueDate}">K</span></td>
                <td th:utext="|<b>${document.documentSubType.name}</b><br>${document.title}|"></td>
                <td th:utext="${!document.senderRegisteredNumber.isEmpty() ? document.senderRegisteredNumber + '<hr>' + #dates.format(document.senderRegisteredDate, 'dd-MM-yyyy') : ''}"></td>
                <td>
                    <br>
                    <p th:if="${document.senderResponsible.responsibleType == 1}" th:each="ss : ${document.senderResponsible.staff}" th:utext="${ss.name}"> </p>
                    <p th:if="${document.senderResponsible.responsibleType == 2}" th:each="sd : ${document.senderResponsible.departments}" th:utext="${sd.name}"> </p>
                    <p th:if="${document.senderResponsible.responsibleType == 3}" th:each="so : ${document.senderResponsible.organizations}" th:utext="${so.name}"> </p>
                    <p th:if="${document.senderResponsible.responsibleType == 4}" th:each="sp : ${document.senderResponsible.person}" th:utext="${sp.name}"> </p>
                </td>
                <td th:utext="${!document.receiverRegisteredNumber.isEmpty() ? document.receiverRegisteredNumber + '<hr>' + #dates.format(document.receiverRegisteredDate, 'dd-MM-yyyy') : ''}"></td>
                <td>
                    <br>
                    <p th:if="${document.receiverResponsible.responsibleType == 1}" th:each="rs : ${document.receiverResponsible.staff}" th:utext="${rs.name}"> </p>
                    <p th:if="${document.receiverResponsible.responsibleType == 2}" th:each="rd : ${document.receiverResponsible.departments}" th:utext="${rd.name}"> </p>
                    <p th:if="${document.receiverResponsible.responsibleType == 3}" th:each="ro : ${document.receiverResponsible.organizations}" th:utext="${ro.name}"> </p>
                    <p th:if="${document.receiverResponsible.responsibleType == 4}" th:each="rp : ${document.receiverResponsible.person}" th:utext="${rp.name}"> </p>
                </td>
                <td th:text="${document.documentDueDate} != null ? ${#dates.format(document.documentDueDate, 'dd-MM-yyyy')} : ''">None</td>
            </tr>
            </tbody>
        </table>
    </th:block>
    <th:block th:fragment="incomingIndex">
        <table class="table table-bordered table-hover" id="documentTable">
            <thead class="thead-default">
            <tr>
                <th width="30px"></th>
                <th width="50px">KОНТРОЛЬ</th>
                <th width="80px">Вхд. №</th>
                <th width="60px">Вхд. Дата</th>
                <th width="120px">Исх. №</th>
                <th width="60px">Исх. Дата</th>
                <th th:text="#{label.document.sender}">Отправитель</th>
                <th th:text="#{label.document.title}">Относительно</th>
                <th width="330px" th:text="#{label.document.receiver}">Исполнитель</th>
                <th width="150px" th:text="#{label.document.generalStatus}">Состояние</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="document, i : ${documents}" th:classappend="${tasks.?[objectId == __${document.id}__].isEmpty() ? '' : ' m--bg-warning'}">
                <td class="table-actions text-left">
                    <span>
                        <div class="dropdown">
                            <a href="#" class="btn m-btn m-btn--hover-metal m-btn--icon m-btn--icon-only m-btn--pill btn-dropdown" data-toggle="dropdown"><i class="la la-ellipsis-h"></i></a>
                            <div class="dropdown-menu dropdown-menu-left">

                                <a class="dropdown-item" th:if="${tasks.?[objectId == __${document.id}__].isEmpty()}" th:href="@{/doc/view/__${document.id}__}">
                                    <span th:text="#{label.view}"></span>
                                </a>

                                <a class="dropdown-item" th:if="${!tasks.?[objectId == __${document.id}__].isEmpty()}" th:href="@{/doc/edit/__${document.id}__}">
                                    <span th:text="#{label.open}"></span>
                                </a>

                                <!--a class="dropdown-item" th:if="${tasks.?[objectId == __${document.id}__].isEmpty()}" th:href="@{/doc/edit/__${document.id}__}" sec:authorize="hasAnyAuthority('PERM_ADD_INCOMEDOC')">
                                    <span>-</span>
                                </a-->

                            </div>
                        </div>
                    </span>
                </td>
                <td class="text-center"><span class="text-danger" th:if="${document.documentDueDate}" th:utext="${#dates.format(document.documentDueDate, 'dd.MM.yy')}"></span></td>
                <td class="text-center" th:utext="${document.receiverRegisteredNumber}"><span></span></td>
                <td class="text-center" th:utext="${#dates.format(document.receiverRegisteredDate, 'dd.MM.yy')}"><span></span></td>
                <td th:utext="${document.senderRegisteredNumber}"></td>
                <td th:utext="${#dates.format(document.senderRegisteredDate, 'dd.MM.yy')}"></td>
                <td>
                    <p class="nopm" th:if="${document.senderResponsible?.responsibleType == 3}" th:each="so : ${document.senderResponsible?.organizations}" th:utext="${so.name}"> </p>
                    <p class="nopm" th:if="${document.senderResponsible?.responsibleType == 4}" th:each="sp : ${document.senderResponsible?.person}" th:utext="${sp.name}"> </p>
                    <p class="nopm" th:if="${not #strings.isEmpty(document.senderResponsible?.responsibleName)}" th:utext="${'/ ' + document.senderResponsible?.responsibleName + ' /'}"> </p>
                </td>
                <td th:text="${document.title}"></td>
                <td>
                    <p class="nopm" th:if="${document.receiverResponsible?.responsibleType == 1}" th:each="rs : ${document.receiverResponsible?.staff}" th:utext="${rs.name}"> </p>
                </td>
                <td th:text="${document.documentState.text()}"></td>
            </tr>
            </tbody>
        </table>
    </th:block>
    <th:block th:fragment="outgoingIndex">
        <table class="table table-bordered" id="documentTable">
            <thead class="thead-default">
            <tr>
                <th width="30px">*</th>
                <th width="30px"></th>
                <th width="120px">Исх. № <br> Дата</th>
                <th th:utext="|#{label.document.documentSubType} <br> #{label.document.title}|">Относительно</th>
                <th th:text="#{label.document.generalStatus}">Состояние</th>
                <th th:text="#{label.document.executer}">Исполнитель</th>
                <th th:text="#{label.document.receiver}">Получатель</th>
                <th width="120px" th:utext="|#{label.document.pageIndex} <br> #{label.document.pageCount}|">Номер бланка</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="document, i : ${documents}" th:classappend="${document.docIndex == 0} ? 'active-document' : ''">
                <td class="table-actions text-left">
                    <span>
                        <div class="dropdown">
                            <a href="#" class="btn m-btn m-btn--hover-metal m-btn--icon m-btn--icon-only m-btn--pill btn-dropdown" data-toggle="dropdown"><i class="la la-ellipsis-h"></i></a>
                            <div class="dropdown-menu dropdown-menu-left">

                                <a class="dropdown-item" th:if="${tasks.?[objectId == __${document.id}__].isEmpty()}" th:href="@{/doc/view/__${document.id}__}">
                                    <span th:text="#{label.view}"></span>
                                </a>

                                <a class="dropdown-item" th:if="${!tasks.?[objectId == __${document.id}__].isEmpty()}" th:href="@{/doc/edit/__${document.id}__}">
                                    <span th:text="#{label.open}"></span>
                                </a>

                                <a class="openact dropdown-item" th:if="${document.documentState.ordinal() == 5}" th:href="@{/doc/save/__${document.id}__}" sec:authorize="hasAnyAuthority('PERM_REGISTER_OUTGOINGDOC')">
                                    <span>Зарегистрировать</span>
                                </a>
                            </div>
                        </div>
                    </span>
                </td>
                <td th:text="${document.docIndex}"></td>
                <td>
                    <p th:utext="${document.senderRegisteredNumber}"></p>
                    <p th:utext="${#dates.format(document.senderRegisteredDate, 'dd-MM-yyyy')}"></p>
                </td>
                <td th:utext="|<b>${document.documentSubType.name}</b><br>${document.title}|"></td>
                <td th:text="${document.documentState.text()}"></td>
                <td th:text="${document.owner.staff.name}">ГАУБК при МФ КР</td>
                <td>
                    <p class="nopm" th:if="${document.receiverResponsible.responsibleType == 3}" th:each="ro : ${document.receiverResponsible.organizations}" th:utext="${ro.name}"> </p>
                    <p class="nopm" th:if="${document.receiverResponsible.responsibleType == 4}" th:each="rp : ${document.receiverResponsible.person}" th:utext="${rp.name}"> </p>
                    <p class="nopm" th:if="${not #strings.isEmpty(document.senderResponsible?.responsibleName)}" th:utext="${'/ ' + document.senderResponsible?.responsibleName + ' /'}"> </p>
                </td>
                <td>
                    <p th:utext="${document.indexNo}"></p>
                    <p th:utext="${document.pageCount}"></p>
                </td>
            </tr>
            </tbody>
        </table>
    </th:block>

    <th:block th:fragment="reconciliationreportIndex">
        <table class="table table-bordered table-hover" id="documentTable">
            <thead class="thead-default">
            <tr>
                <th width="30px">*</th>
                <th width="30px"></th>
                <th width="120px">Исх. № <br> Дата</th>
                <th th:utext="#{label.document.title}">Относительно</th>
                <th th:text="#{label.document.generalStatus}">Состояние</th>
                <th th:text="#{label.document.executer}">Исполнитель</th>
                <th th:text="#{label.document.receiver}">Получатель</th>
                <th width="120px" th:utext="|#{label.document.pageIndex} <br> #{label.document.pageCount}|">Номер бланка</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="document, i : ${documents}">
                <td class="table-actions text-left">
                    <span>
                        <div class="dropdown">
                            <a href="#" class="btn m-btn m-btn--hover-metal m-btn--icon m-btn--icon-only m-btn--pill btn-dropdown" data-toggle="dropdown"><i class="la la-ellipsis-h"></i></a>
                            <div class="dropdown-menu dropdown-menu-left">

                                <a class="dropdown-item" th:if="${tasks.?[objectId == __${document.id}__].isEmpty()}" th:href="@{/doc/view/__${document.id}__}">
                                    <span th:text="#{label.view}"></span>
                                </a>

                                <a class="dropdown-item" th:if="${!tasks.?[objectId == __${document.id}__].isEmpty()}" th:href="@{/doc/edit/__${document.id}__}">
                                    <span th:text="#{label.open}"></span>
                                </a>

                                <a class="openact dropdown-item" th:if="${document.documentState.ordinal() == 5}" th:href="@{/doc/save/__${document.id}__}" sec:authorize="hasAnyAuthority('PERM_REGISTER_OUTGOINGDOC')">
                                    <span>Зарегистрировать</span>
                                </a>
                            </div>
                        </div>
                    </span>
                </td>
                <td th:text="${document.docIndex}"></td>
                <td th:utext="${!document.senderRegisteredNumber.isEmpty() ? document.senderRegisteredNumber + '<hr>' + #dates.format(document.senderRegisteredDate, 'dd-MM-yyyy') : ''}"></td>
                <td th:text="${document.title}"></td>
                <td th:text="${document.documentState.text()}"></td>
                <td th:text="${document.owner.staff.name}">ГАУБК при МФ КР</td>
                <td>
                    <br>
                    <p th:if="${document.receiverResponsible.responsibleType == 3}" th:each="ro : ${document.receiverResponsible.organizations}" th:utext="${ro.name}"> </p>
                    <p th:if="${document.receiverResponsible.responsibleType == 4}" th:each="rp : ${document.receiverResponsible.person}" th:utext="${rp.name}"> </p>
                </td>
                <td th:utext="${document.indexNo  + '<hr>' + document.pageCount}"></td>
            </tr>
            </tbody>
        </table>
    </th:block>
    <th:block th:fragment="complaintIndex">
        <table class="table table-bordered table-hover" id="documentTable">
            <thead class="thead-default">
            <tr>
                <th width="30px">*</th>
                <th width="30px"></th>
                <th width="120px">Исх. № <br> Дата</th>
                <th th:utext="#{label.document.title}">Относительно</th>
                <th th:text="#{label.document.generalStatus}">Состояние</th>
                <th th:text="#{label.document.executer}">Исполнитель</th>
                <th th:text="#{label.document.receiver}">Получатель</th>
                <th width="120px" th:utext="|#{label.document.pageIndex} <br> #{label.document.pageCount}|">Номер бланка</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="document, i : ${documents}">
                <td class="table-actions text-left">
                    <span>
                        <div class="dropdown">
                            <a href="#" class="btn m-btn m-btn--hover-metal m-btn--icon m-btn--icon-only m-btn--pill btn-dropdown" data-toggle="dropdown"><i class="la la-ellipsis-h"></i></a>
                            <div class="dropdown-menu dropdown-menu-left">

                                <a class="dropdown-item" th:if="${tasks.?[objectId == __${document.id}__].isEmpty()}" th:href="@{/doc/view/__${document.id}__}">
                                    <span th:text="#{label.view}"></span>
                                </a>

                                <a class="dropdown-item" th:if="${!tasks.?[objectId == __${document.id}__].isEmpty()}" th:href="@{/doc/edit/__${document.id}__}">
                                    <span th:text="#{label.open}"></span>
                                </a>

                                <a class="openact dropdown-item" th:if="${document.documentState.ordinal() == 5}" th:href="@{/doc/save/__${document.id}__}" sec:authorize="hasAnyAuthority('PERM_REGISTER_OUTGOINGDOC')">
                                    <span>Зарегистрировать</span>
                                </a>
                            </div>
                        </div>
                    </span>
                </td>
                <td th:text="${document.docIndex}"></td>
                <td th:utext="${!document.senderRegisteredNumber.isEmpty() ? document.senderRegisteredNumber + '<hr>' + #dates.format(document.senderRegisteredDate, 'dd-MM-yyyy') : ''}"></td>
                <td th:text="${document.title}"></td>
                <td th:text="${document.documentState.text()}"></td>
                <td th:text="${document.owner.staff.name}">ГАУБК при МФ КР</td>
                <td>
                    <br>
                    <p th:if="${document.receiverResponsible.responsibleType == 3}" th:each="ro : ${document.receiverResponsible.organizations}" th:utext="${ro.name}"> </p>
                    <p th:if="${document.receiverResponsible.responsibleType == 4}" th:each="rp : ${document.receiverResponsible.person}" th:utext="${rp.name}"> </p>
                </td>
                <td th:utext="${document.indexNo  + '<hr>' + document.pageCount}"></td>
            </tr>
            </tbody>
        </table>
    </th:block>
    <th:block th:fragment="notificationIndex">
        <table class="table table-bordered table-hover" id="documentTable">
            <thead class="thead-default">
            <tr>
                <th width="30px">*</th>
                <th width="30px"></th>
                <th width="120px">Исх. № <br> Дата</th>
                <th th:utext="#{label.document.title}">Относительно</th>
                <th th:text="#{label.document.generalStatus}">Состояние</th>
                <th th:text="#{label.document.executer}">Исполнитель</th>
                <th th:text="#{label.document.receiver}">Получатель</th>
                <th width="120px" th:utext="|#{label.document.pageIndex} <br> #{label.document.pageCount}|">Номер бланка</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="document, i : ${documents}">
                <td class="table-actions text-left">
                    <span>
                        <div class="dropdown">
                            <a href="#" class="btn m-btn m-btn--hover-metal m-btn--icon m-btn--icon-only m-btn--pill btn-dropdown" data-toggle="dropdown"><i class="la la-ellipsis-h"></i></a>
                            <div class="dropdown-menu dropdown-menu-left">

                                <a class="dropdown-item" th:if="${tasks.?[objectId == __${document.id}__].isEmpty()}" th:href="@{/doc/view/__${document.id}__}">
                                    <span th:text="#{label.view}"></span>
                                </a>

                                <a class="dropdown-item" th:if="${!tasks.?[objectId == __${document.id}__].isEmpty()}" th:href="@{/doc/edit/__${document.id}__}">
                                    <span th:text="#{label.open}"></span>
                                </a>

                                <a class="openact dropdown-item" th:if="${document.documentState.ordinal() == 5}" th:href="@{/doc/save/__${document.id}__}" sec:authorize="hasAnyAuthority('PERM_REGISTER_OUTGOINGDOC')">
                                    <span>Зарегистрировать</span>
                                </a>
                            </div>
                        </div>
                    </span>
                </td>
                <td th:text="${document.docIndex}"></td>
                <td th:utext="${!document.senderRegisteredNumber.isEmpty() ? document.senderRegisteredNumber + '<hr>' + #dates.format(document.senderRegisteredDate, 'dd-MM-yyyy') : ''}"></td>
                <td th:text="${document.title}"></td>
                <td th:text="${document.documentState.text()}"></td>
                <td th:text="${document.owner.staff.name}">ГАУБК при МФ КР</td>
                <td>
                    <br>
                    <p th:if="${document.receiverResponsible.responsibleType == 3}" th:each="ro : ${document.receiverResponsible.organizations}" th:utext="${ro.name}"> </p>
                    <p th:if="${document.receiverResponsible.responsibleType == 4}" th:each="rp : ${document.receiverResponsible.person}" th:utext="${rp.name}"> </p>
                </td>
                <td th:utext="${document.indexNo  + '<hr>' + document.pageCount}"></td>
            </tr>
            </tbody>
        </table>
    </th:block>
    <th:block th:fragment="contractIndex">
        <table class="table table-bordered table-hover" id="documentTable">
            <thead class="thead-default">
            <tr>
                <th width="30px">*</th>
                <th width="30px"></th>
                <th width="120px">Исх. № <br> Дата</th>
                <th th:utext="#{label.document.title}">Относительно</th>
                <th th:text="#{label.document.generalStatus}">Состояние</th>
                <th th:text="#{label.document.executer}">Исполнитель</th>
                <th th:text="#{label.document.receiver}">Получатель</th>
                <th width="120px" th:utext="|#{label.document.pageIndex} <br> #{label.document.pageCount}|">Номер бланка</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="document, i : ${documents}">
                <td class="table-actions text-left">
                    <span>
                        <div class="dropdown">
                            <a href="#" class="btn m-btn m-btn--hover-metal m-btn--icon m-btn--icon-only m-btn--pill btn-dropdown" data-toggle="dropdown"><i class="la la-ellipsis-h"></i></a>
                            <div class="dropdown-menu dropdown-menu-left">

                                <a class="dropdown-item" th:if="${tasks.?[objectId == __${document.id}__].isEmpty()}" th:href="@{/doc/view/__${document.id}__}">
                                    <span th:text="#{label.view}"></span>
                                </a>

                                <a class="dropdown-item" th:if="${!tasks.?[objectId == __${document.id}__].isEmpty()}" th:href="@{/doc/edit/__${document.id}__}">
                                    <span th:text="#{label.open}"></span>
                                </a>

                                <a class="openact dropdown-item" th:if="${document.documentState.ordinal() == 5}" th:href="@{/doc/save/__${document.id}__}" sec:authorize="hasAnyAuthority('PERM_REGISTER_OUTGOINGDOC')">
                                    <span>Зарегистрировать</span>
                                </a>
                            </div>
                        </div>
                    </span>
                </td>
                <td th:text="${document.docIndex}"></td>
                <td th:utext="${!document.senderRegisteredNumber.isEmpty() ? document.senderRegisteredNumber + '<hr>' + #dates.format(document.senderRegisteredDate, 'dd-MM-yyyy') : ''}"></td>
                <td th:text="${document.title}"></td>
                <td th:text="${document.documentState.text()}"></td>
                <td th:text="${document.owner.staff.name}">ГАУБК при МФ КР</td>
                <td>
                    <br>
                    <p th:if="${document.receiverResponsible.responsibleType == 3}" th:each="ro : ${document.receiverResponsible.organizations}" th:utext="${ro.name}"> </p>
                    <p th:if="${document.receiverResponsible.responsibleType == 4}" th:each="rp : ${document.receiverResponsible.person}" th:utext="${rp.name}"> </p>
                </td>
                <td th:utext="${document.indexNo  + '<hr>' + document.pageCount}"></td>
            </tr>
            </tbody>
        </table>
    </th:block>

</body>
</html>
<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<head>
<title>MFLoan | Credit Orders</title>
<div th:replace="fragments/header :: header-css" />
<link th:href="@{/assets/global/plugins/bootstrap-daterangepicker/daterangepicker.min.css}" rel="stylesheet" type="text/css" />
<link th:href="@{/assets/global/plugins/bootstrap-datepicker/css/bootstrap-datepicker3.min.css}" rel="stylesheet" type="text/css" />
<link th:href="@{/assets/global/plugins/bootstrap-datetimepicker/css/bootstrap-datetimepicker.min.css}" rel="stylesheet" type="text/css" />
</head>
<body
	class="page-header-fixed page-sidebar-closed-hide-logo page-container-bg-solid page-sidebar-closed">
	<!-- BEGIN HEADER -->
	<div th:replace="layout :: header-top" />
	<!-- END HEADER -->
	<!-- BEGIN CONTAINER -->
	<div class="page-container">
		<!-- BEGIN SIDEBAR -->
		<div th:replace="layout :: page-container-sidebar" />
		<!-- END SIDEBAR -->
		<!-- BEGIN CONTENT -->
		<div class="page-content-wrapper">
			<!-- BEGIN CONTENT BODY -->
			<div class="page-content">
				<div class="row">
					<div class="col-md-12">
						<!-- BEGIN BORDERED TABLE PORTLET-->
						<div class="portlet light portlet-fit ">
							<div class="portlet-title">
								<div class="caption">
									<i class="icon-settings font-green"></i>
									<span class="caption-subject font-green sbold uppercase">Orders</span>
								</div>
							</div>
							<div class="portlet-body">
								<div class="table-toolbar">
									<div class="pull-left">
										<div class="btn-group">
											<a th:href="@{/manage/order/0/save}" class="btn green" th:text="#{label.order.button.addNewCreditOrder}">Add New Debtor <i class="fa fa-plus"></i></a>
										</div>
									</div>
									<div class="page-size-group pull-right">
										<span>Показать</span>
										<select class="form-control page-size-select" id="pageSizeSelect">
											<option th:each="pageSize : ${pageSizes}" th:text="${pageSize}" th:value="${pageSize}"
													th:selected="${pageSize} == ${selectedPageSize}"></option>
										</select>
										<span>записей</span>
									</div>
								</div>
								<div class="table-scrollable table-scrollable-borderless">
									<table class="table compact" id="orders">
										<thead>
											<tr>
												<th>label.order.table.id</th>
												<th>label.order.table.regNum</th>
												<th>label.order.table.regDate</th>
												<th>label.order.table.description</th>
												<th>label.order.table.creditOrderState</th>
												<th>label.order.table.creditOrderType</th>
												<th>label.order.table.viewDetails</th>
												<th>label.order.table.edit</th>
												<th>label.order.table.delete</th>
											</tr>
										</thead>
										<tbody>
											<tr th:each="o : ${orders}">
												<td th:text="${o.id}">Id</td>
												<td th:text="${o.regNumber}">AB0C1234</td>
												<td th:text="${o.regDate}">01.01.2017</td>
												<td th:text="${o.description}">Description here</td>
												<td th:text="${o.creditOrderState.name}">Active</td>
												<td th:text="${o.creditOrderType.name}">RPKR</td>
												<td>
													<a th:href="@{/manage/order/__${o.id}__/view}"
													   role="button"
													   class="btn btn-outline btn-circle btn-sm blue"
													   th:text="#{label.order.button.view}">View</a>
												</td>
												<td>
													<a class="btn btn-outline btn-circle btn-sm green"
													   th:href="@{/manage/order/__${o.id}__/save}"
													   th:text="#{label.order.button.edit}">Edit</a>
												</td>
												<td>
													<form th:action="@{/manage/debtor/delete}" method="post" onsubmit="return confirm('Are you sure?') ? true : false;">
														<button type="submit"
																class="btn btn-outline btn-circle dark btn-sm red"
																th:text="#{label.order.button.delete}">Delete</button>
														<input hidden="true" type="text" id="id" name="id" th:value="${o.id}" />
													</form>
												</td>
											</tr>
										</tbody>
									</table>
								</div>
								<div class="table-toolbar row">
									<div th:if="${count != 1}" class="col-md-8 pagination-centered pull-right">
										<ul class="pagination">
											<li th:class="${current == 0} ? disabled">
												<a class="pageLink" th:href="@{/manage/order/list(pageSize=${selectedPageSize}, page=1)}">&laquo;</a>
											</li>
											<li th:class="${current == 0} ? disabled">
												<a class="pageLink" th:href="@{/manage/order/list(pageSize=${selectedPageSize}, page=${current})}">&larr;</a>
											</li>
											<li th:class="${current == (page - 1)} ? 'active pointer-disabled'"
												th:each="page : ${#numbers.sequence(pager.startPage, pager.endPage)}">
												<a class="pageLink" th:href="@{/manage/order/list(pageSize=${selectedPageSize}, page=${page})}"
												   th:text="${page}"></a>
											</li>
											<li th:class="${current + 1 == count} ? disabled">
												<a class="pageLink"
												   th:href="@{/manage/order/list(pageSize=${selectedPageSize}, page=${current + 2})}">&rarr;</a>
											</li>
											<li th:class="${current + 1 == count} ? disabled">
												<a class="pageLink"
												   th:href="@{/manage/order/list(pageSize=${selectedPageSize}, page=${count})}">&raquo;</a>
											</li>
										</ul>
									</div>
								</div>
							</div>
						</div>
						<!-- END BORDERED TABLE PORTLET-->
					</div>
				</div>
			</div>
			<!-- END CONTENT BODY -->
		</div>
		<!-- END CONTENT -->
		<!-- <div th:replace="layout :: page-container-quick-sidebar"/> -->
	</div>
	<!-- END CONTAINER -->
	<div th:replace="layout :: footer" />
	<div th:replace="fragments/footer :: footer-js" />
	<script th:src="@{/js/app.js}" type="text/javascript"></script>
	<script th:src="@{/assets/global/plugins/moment.min.js}" type="text/javascript"></script>
	<script th:src="@{/assets/global/plugins/bootstrap-daterangepicker/daterangepicker.min.js}" type="text/javascript"></script>
	<script th:src="@{/assets/global/plugins/bootstrap-datepicker/js/bootstrap-datepicker.min.js}" type="text/javascript"></script>
	<script th:src="@{/assets/global/plugins/bootstrap-datetimepicker/js/bootstrap-datetimepicker.min.js}" type="text/javascript"></script>
	<script th:src="@{/assets/pages/scripts/components-date-time-pickers.min.js}" type="text/javascript"></script>
	<script type="text/javascript">
        $("#saveModal").on("show.bs.modal", function(e) {

            var link = $(e.relatedTarget);


            var regionID = $("#saveModal").val();

            if(link.attr("href").indexOf('manage/order/0/saveForm')>0)
            {
                //$(this).find(".modal-title").html(link.attr("href").replace("/district/add","/region/"+regionID+"/district/add"));
                $(this).find(".modal-body").load(link.attr("href"));
            }
            else
            {
                //$(this).find(".modal-title").html(link.attr("href"));
                $(this).find(".modal-body").load(link.attr("href"));
            }
        });
	</script>
</body>
</html>
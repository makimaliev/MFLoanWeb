<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
	<title th:text="#{label.debtor.page.title}"> Region List</title>

	<div th:replace="fragments/header :: header-css" />

	<link th:href="@{/assets/global/plugins/datatables/keyTable.bootstrap.css}" rel="stylesheet" type="text/css" />
	<link th:href="@{/assets/global/plugins/datatables/datatables.min.css}" rel="stylesheet" type="text/css" />
	<link th:href="@{/assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.css}" rel="stylesheet" type="text/css" />

	<style type="text/css">
		table.KeyTable tr.focus {
			outline: 3px solid #3366FF;
			outline-offset: -3px;
		}
	</style>
</head>
<body
	class="page-header-fixed page-sidebar-closed-hide-logo page-container-bg-solid page-sidebar-closed">
	<!-- BEGIN HEADER -->
	<div th:replace="layout :: header-top" />
	<!-- END HEADER -->

	<!-- BEGIN CONTAINER -->
	<div class="page-container">
		<!-- BEGIN SIDEBAR -->
		<div th:replace="layout :: page-container-sidebar" />
		<!-- END SIDEBAR -->
		<!-- BEGIN CONTENT -->
		<div class="page-content-wrapper">
			<!-- BEGIN CONTENT BODY -->
			<div class="page-content">

				<div class="row">
					<div class="col-md-12">
						<!-- BEGIN BORDERED TABLE PORTLET-->
						<div class="portlet portlet-fit ">
							<div class="portlet-body">

								<div class="table-toolbar">
									<div class="row">
										<div class="form-group col-md-4 page-size-group">
											<span>Показать</span>
											<select class="form-control page-size-select" id="pageSizeSelect">
												<option th:each="pageSize : ${pageSizes}" th:text="${pageSize}" th:value="${pageSize}"
														th:selected="${pageSize} == ${selectedPageSize}"></option>
											</select>
											<span>записей</span>
										</div>
									</div>
								</div>

								<div class="table-scrollable table-scrollable-borderless">

									<table class="table compact" id="orderTable">
										<thead>
											<tr>
												<th th:text="#{label.debtor.table.id}">Id</th>
												<th th:text="#{label.debtor.table.name}">Name</th>
												<th th:text="#{label.debtor.table.debtorType}">Type</th>
												<th th:text="#{label.debtor.table.orgForm}">Organization form</th>
												<th th:text="#{label.debtor.table.workSector}">Work sector</th>
												<th th:text="#{label.debtor.table.view}">View Details</th>
												<th th:text="#{label.debtor.table.edit}">Edit</th>
												<th th:text="#{label.debtor.table.delete}">Delete</th>
											</tr>
										</thead>
										<tbody>
										<tr th:each="debtor : ${debtors}">
											<td th:text="${debtor.id}">Id</td>
											<td th:text="${debtor.name}">Name</td>
											<td th:text="${debtor.debtorType.name}">Type</td>
											<td th:text="${debtor.orgForm.name}">Org form</td>
											<td th:text="${debtor.workSector.name}">Work sector</td>
											<td><a th:href="@{/manage/debtor/__${debtor.id}__/view}"
												   role="button"
												   class="btn btn-xs green-stripe"
												   th:text="#{label.debtor.button.view}">View</a>
											</td>
											<td>
												<a data-remote="false"
												   data-toggle="modal"
												   data-target="#regionFormModal"
												   role="button"
												   class="btn btn-xs blue-stripe"
												   th:href="@{/manage/debtor/__${debtor.id}__/save}"
												   th:text="#{label.debtor.button.edit}">Edit</a>
											</td>
											<td>
												<form th:action="@{/manage/debtor/delete}" method="post">
													<button type="submit"
															class="btn btn-xs red-stripe"
															th:text="#{label.debtor.button.delete}">Delete</button>
												</form>
											</td>
										</tr>
										</tbody>
									</table>

									<table class="dataTable" id="orderTable2"></table>
								</div>

								<div class="row">
									<div class="col-md-4">
										<a th:href="@{/manage/debtor/0/save}"
										   role="button"
										   class="btn btn-large btn-primary"
										   th:text="#{label.debtor.button.addDebtor}">Add Region</a>
									</div>
									<div th:if="${count != 1}" class="col-md-8 pagination-centered text-right">
										<ul class="pagination">
											<li th:class="${current == 0} ? disabled">
												<a class="pageLink" th:href="@{/manage/debtor/list(pageSize=${selectedPageSize}, page=1)}">&laquo;</a>
											</li>
											<li th:class="${current == 0} ? disabled">
												<a class="pageLink" th:href="@{/manage/debtor/list(pageSize=${selectedPageSize}, page=${current})}">&larr;</a>
											</li>
											<li th:class="${current == (page - 1)} ? 'active pointer-disabled'"
												th:each="page : ${#numbers.sequence(pager.startPage, pager.endPage)}">
												<a class="pageLink" th:href="@{/manage/debtor/list(pageSize=${selectedPageSize}, page=${page})}"
												   th:text="${page}"></a>
											</li>
											<li th:class="${current + 1 == count} ? disabled">
												<a class="pageLink"
												   th:href="@{/manage/debtor/list(pageSize=${selectedPageSize}, page=${current + 2})}">&rarr;</a>
											</li>
											<li th:class="${current + 1 == count} ? disabled">
												<a class="pageLink"
												   th:href="@{/manage/debtor/list(pageSize=${selectedPageSize}, page=${count})}">&raquo;</a>
											</li>
										</ul>
									</div>
								</div>

							</div>
						</div>
						<!-- END BORDERED TABLE PORTLET-->
					</div>
				</div>

				<div class="row">

				</div>

			</div>
			<!-- END CONTENT BODY -->
		</div>
		<!-- END CONTENT -->
		<!-- <div th:replace="layout :: page-container-quick-sidebar"/> -->
	</div>
	<!-- END CONTAINER -->
	<div th:replace="layout :: footer" />
	<div th:replace="fragments/footer :: footer-js" />

	<script th:src="@{/js/app.js}" type="text/javascript"></script>

	<script th:src="@{/assets/global/plugins/datatables/datatables.js}" type="text/javascript"></script>
	<script th:src="@{/assets/global/plugins/datatables/dataTables.keyTable.js}" type="text/javascript"></script>

	<script type="text/javascript">
        $(document).ready(function() {

            // var table = $('#orderTable').DataTable({
            //     stateSave: true,
            //     "language": {"url": "//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Russian.json"},
            //     "info": false,
            //     keys: {
            //         focus: ':eq(0)'
            //     }
            // } );

            // table.on('key-focus', function(e, datatable, cell) {
            //
            //
            //     var rowData = datatable.row(cell.index().row).data();
            //
            //     $("#region_id").val(rowData[0]);
            //
            //     var sUrl ="/MFCredit/region/" + rowData[0]+"/view";
            //
            //     $.get(sUrl, function(data) {
            //
            //         //$('#content').html(data);
            //     });
            //
            //
            //
            //
            //
            //     var row = datatable.row( cell.index().row );
            //
            //
            //     table.$('tr.info').removeClass('info');
            //     $( row.node() ).addClass( "info" );
            //
            //     var rowData = row.data();
            //
            //
            //     var colData = datatable.cell( { focused: true } ).data();
            //
            //
            // });

        });
	</script>
</body>
</html>